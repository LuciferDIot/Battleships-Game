parser_version('116f27e7eb51f509218253a845ec133cc2f8c434').
classical_b('Battleships',['F:\\Campus\\Formal Methods\\atelier B\\workspace\\Battleships\\Battleships.mch','F:\\Campus\\Formal Methods\\atelier B\\workspace\\Battleships\\GameStateMachine.mch']).
machine(abstract_machine(p5(1,5,1,173,4),machine(p3(5,1,8)),machine_header(p3(6,5,16),'Battleships',[]),[includes(p5(1,7,1,8,21),[machine_reference(p3(8,5,21),'GameStateMachine',[])]),sets(p5(1,9,1,10,126),[enumerated_set(p3(10,5,126),'REPORT',[identifier(p3(10,15,27),'Player_1_Hit'),identifier(p3(10,29,41),'Player_2_Hit'),identifier(p3(10,43,56),'Player_1_Miss'),identifier(p3(10,58,71),'Player_2_Miss'),identifier(p3(10,73,87),'Error_Not_Turn'),identifier(p3(10,89,106),'Player_1_Deployed'),identifier(p3(10,108,125),'Player_2_Deployed')])]),constants(p5(1,12,1,13,43),[identifier(p3(13,5,9),'Grid'),identifier(p3(13,11,17),'Grid_X'),identifier(p3(13,19,25),'Grid_Y'),identifier(p3(13,27,43),'Battleship_Count')]),properties(p5(1,15,1,19,55),conjunct(p5(1,16,5,19,55),[subset(p3(16,5,23),identifier(p3(16,5,11),'Grid_X'),natural1_set(p3(16,15,23))),subset(p3(16,26,44),identifier(p3(16,26,32),'Grid_Y'),natural1_set(p3(16,36,44))),equal(p3(17,5,19),identifier(p3(17,5,11),'Grid_X'),interval(p3(17,14,19),integer(p3(17,14,15),1),integer(p3(17,17,19),10))),equal(p3(17,22,36),identifier(p3(17,22,28),'Grid_Y'),interval(p3(17,31,36),integer(p3(17,31,32),1),integer(p3(17,34,36),10))),equal(p3(18,5,48),identifier(p3(18,5,9),'Grid'),comprehension_set(p3(18,12,48),[identifier(p3(18,13,15),xx),identifier(p3(18,17,19),yy)],conjunct(p3(18,22,47),[member(p3(18,22,33),identifier(p3(18,22,24),xx),identifier(p3(18,27,33),'Grid_X')),member(p3(18,36,47),identifier(p3(18,36,38),yy),identifier(p3(18,41,47),'Grid_Y'))]))),member(p3(19,5,32),identifier(p3(19,5,21),'Battleship_Count'),natural1_set(p3(19,24,32))),equal(p3(19,35,55),identifier(p3(19,35,51),'Battleship_Count'),integer(p3(19,54,55),3))])),definitions(p5(1,21,1,52,38),[predicate_definition(p3(22,5,42),isGameOver,[identifier(p3(22,16,21),fleet)],equal(p3(22,27,42),card(p3(22,27,38),identifier(p3(22,32,37),fleet)),integer(p3(22,41,42),1))),expression_definition(p5(1,26,5,48,10),'ANIMATION_FUNCTION',[],comprehension_set(p5(1,26,28,48,10),[identifier(p3(26,29,30),r),identifier(p3(26,32,33),c),identifier(p3(26,35,36),i)],conjunct(p5(1,26,38,42,80),[member(p3(26,38,46),identifier(p3(26,38,39),r),identifier(p3(26,40,46),'Grid_X')),member(p3(26,49,57),identifier(p3(26,49,50),c),identifier(p3(26,51,57),'Grid_Y')),conjunct(p5(1,28,18,42,80),[implication(p5(1,28,18,32,80),equal(p3(28,18,41),identifier(p3(28,18,30),current_turn),identifier(p3(28,33,41),'Player_2')),conjunct(p5(1,30,26,32,80),[implication(p3(30,26,56),member(p3(30,26,49),couple(p3(30,26,31),[identifier(p3(30,27,28),r),identifier(p3(30,29,30),c)]),function(p3(30,32,49),identifier(p3(30,32,39),attacks),[identifier(p3(30,40,48),'Player_1')])),equal(p3(30,53,56),identifier(p3(30,53,54),i),integer(p3(30,55,56),2))),implication(p5(1,31,26,32,80),not_member(p3(31,26,50),couple(p3(31,26,31),[identifier(p3(31,27,28),r),identifier(p3(31,29,30),c)]),function(p3(31,33,50),identifier(p3(31,33,40),attacks),[identifier(p3(31,41,49),'Player_1')])),conjunct(p3(32,34,80),[implication(p3(32,34,54),member(p3(32,34,47),couple(p3(32,34,39),[identifier(p3(32,35,36),r),identifier(p3(32,37,38),c)]),identifier(p3(32,40,47),fleet_2)),equal(p3(32,51,54),identifier(p3(32,51,52),i),integer(p3(32,53,54),1))),implication(p3(32,59,80),not_member(p3(32,59,73),couple(p3(32,59,64),[identifier(p3(32,60,61),r),identifier(p3(32,62,63),c)]),identifier(p3(32,66,73),fleet_2)),equal(p3(32,77,80),identifier(p3(32,77,78),i),integer(p3(32,79,80),0)))]))])),implication(p5(1,38,18,42,80),equal(p3(38,18,41),identifier(p3(38,18,30),current_turn),identifier(p3(38,33,41),'Player_1')),conjunct(p5(1,40,26,42,80),[implication(p3(40,26,56),member(p3(40,26,49),couple(p3(40,26,31),[identifier(p3(40,27,28),r),identifier(p3(40,29,30),c)]),function(p3(40,32,49),identifier(p3(40,32,39),attacks),[identifier(p3(40,40,48),'Player_2')])),equal(p3(40,53,56),identifier(p3(40,53,54),i),integer(p3(40,55,56),2))),implication(p5(1,41,26,42,80),not_member(p3(41,26,50),couple(p3(41,26,31),[identifier(p3(41,27,28),r),identifier(p3(41,29,30),c)]),function(p3(41,33,50),identifier(p3(41,33,40),attacks),[identifier(p3(41,41,49),'Player_2')])),conjunct(p3(42,34,80),[implication(p3(42,34,54),member(p3(42,34,47),couple(p3(42,34,39),[identifier(p3(42,35,36),r),identifier(p3(42,37,38),c)]),identifier(p3(42,40,47),fleet_1)),equal(p3(42,51,54),identifier(p3(42,51,52),i),integer(p3(42,53,54),1))),implication(p3(42,59,80),not_member(p3(42,59,73),couple(p3(42,59,64),[identifier(p3(42,60,61),r),identifier(p3(42,62,63),c)]),identifier(p3(42,66,73),fleet_1)),equal(p3(42,77,80),identifier(p3(42,77,78),i),integer(p3(42,79,80),0)))]))]))])]))),expression_definition(p3(51,5,37),'ANIMATION_IMG1',[],string(p3(51,23,37),'images/2.gif')),expression_definition(p3(50,5,37),'ANIMATION_IMG0',[],string(p3(50,23,37),'images/1.gif')),expression_definition(p3(52,5,37),'ANIMATION_IMG2',[],string(p3(52,23,37),'images/3.gif')),predicate_definition(p3(24,5,50),isValidPosition,[identifier(p3(24,21,29),position)],member(p3(24,35,50),identifier(p3(24,35,43),position),identifier(p3(24,46,50),'Grid'))),predicate_definition(p3(25,5,106),isFleetDeployed,[identifier(p3(25,21,27),player)],conjunct(p3(25,33,106),[implication(p3(25,33,67),equal(p3(25,33,50),identifier(p3(25,33,39),player),identifier(p3(25,42,50),'Player_1')),not_equal(p3(25,54,67),identifier(p3(25,54,61),fleet_1),empty_set(p3(25,65,67)))),implication(p3(25,72,106),equal(p3(25,72,89),identifier(p3(25,72,78),player),identifier(p3(25,81,89),'Player_2')),not_equal(p3(25,93,106),identifier(p3(25,93,100),fleet_2),empty_set(p3(25,104,106))))])),predicate_definition(p3(23,5,51),isPlayerTurn,[identifier(p3(23,18,24),player)],equal(p3(23,30,51),identifier(p3(23,30,42),current_turn),identifier(p3(23,45,51),player)))]),variables(p5(1,54,1,55,30),[identifier(p3(55,5,12),fleet_1),identifier(p3(55,14,21),fleet_2),identifier(p3(55,23,30),attacks)]),invariant(p5(1,57,1,60,35),conjunct(p5(1,58,5,60,35),[member(p3(58,5,24),identifier(p3(58,5,12),fleet_1),pow_subset(p3(58,15,24),identifier(p3(58,19,23),'Grid'))),less_equal(p3(58,27,60),card(p3(58,27,40),identifier(p3(58,32,39),fleet_1)),identifier(p3(58,44,60),'Battleship_Count')),member(p3(59,5,24),identifier(p3(59,5,12),fleet_2),pow_subset(p3(59,15,24),identifier(p3(59,19,23),'Grid'))),less_equal(p3(59,27,60),card(p3(59,27,40),identifier(p3(59,32,39),fleet_2)),identifier(p3(59,44,60),'Battleship_Count')),member(p3(60,5,35),identifier(p3(60,5,12),attacks),total_function(p3(60,15,35),identifier(p3(60,15,21),'PLAYER'),pow_subset(p3(60,26,35),identifier(p3(60,30,34),'Grid'))))])),initialisation(p5(1,62,1,64,50),parallel(p5(1,63,5,64,50),[assign(p3(63,5,31),[identifier(p3(63,5,12),fleet_1),identifier(p3(63,14,21),fleet_2)],[empty_set(p3(63,25,27)),empty_set(p3(63,29,31))]),assign(p3(64,5,50),[identifier(p3(64,5,12),attacks)],[set_extension(p3(64,16,50),[couple(p3(64,17,32),[identifier(p3(64,17,25),'Player_1'),empty_set(p3(64,30,32))]),couple(p3(64,34,49),[identifier(p3(64,34,42),'Player_2'),empty_set(p3(64,47,49))])])])])),operations(p5(1,66,1,171,8),[operation(p5(1,67,5,95,8),identifier(p5(1,67,5,95,8),deployFleet),[identifier(p3(67,5,11),report)],[identifier(p3(67,28,34),player),identifier(p3(67,36,45),positions)],precondition(p5(1,68,5,95,8),conjunct(p5(1,69,9,74,43),[member(p3(69,9,24),identifier(p3(69,9,15),player),identifier(p3(69,18,24),'PLAYER')),member(p3(70,9,30),identifier(p3(70,9,18),positions),pow_subset(p3(70,21,30),identifier(p3(70,25,29),'Grid'))),equal(p3(71,9,43),card(p3(71,9,24),identifier(p3(71,14,23),positions)),identifier(p3(71,27,43),'Battleship_Count')),equal(p3(72,9,46),identifier(p3(72,9,27),current_game_state),identifier(p3(72,30,46),'Deploying_Fleets')),implication(p3(73,10,43),equal(p3(73,10,27),identifier(p3(73,10,16),player),identifier(p3(73,19,27),'Player_1')),equal(p3(73,31,43),identifier(p3(73,31,38),fleet_1),empty_set(p3(73,41,43)))),implication(p3(74,10,43),equal(p3(74,10,27),identifier(p3(74,10,16),player),identifier(p3(74,19,27),'Player_2')),equal(p3(74,31,43),identifier(p3(74,31,38),fleet_2),empty_set(p3(74,41,43))))]),if(p5(1,76,9,94,12),equal(p3(76,12,29),identifier(p3(76,12,18),player),identifier(p3(76,21,29),'Player_1')),if(p5(1,77,13,83,16),equal(p3(77,16,28),identifier(p3(77,16,23),fleet_1),empty_set(p3(77,26,28))),parallel(p5(1,78,17,82,20),[assign(p3(78,17,37),[identifier(p3(78,17,24),fleet_1)],[identifier(p3(78,28,37),positions)]),assign(p3(79,17,44),[identifier(p3(79,17,23),report)],[identifier(p3(79,27,44),'Player_1_Deployed')]),if(p5(1,80,17,82,20),not_equal(p3(80,20,33),identifier(p3(80,20,27),fleet_2),empty_set(p3(80,31,33))),operation_call(p3(81,21,29),identifier(p3(81,21,29),setState),[],[identifier(p3(81,30,37),'Ongoing')]),[],skip(none))]),[],skip(none)),[],if(p5(1,84,14,93,16),equal(p3(84,17,34),identifier(p3(84,17,23),player),identifier(p3(84,26,34),'Player_2')),if(p5(1,86,17,92,20),equal(p3(86,20,32),identifier(p3(86,20,27),fleet_2),empty_set(p3(86,30,32))),parallel(p5(1,87,21,91,24),[assign(p3(87,21,41),[identifier(p3(87,21,28),fleet_2)],[identifier(p3(87,32,41),positions)]),assign(p3(88,21,48),[identifier(p3(88,21,27),report)],[identifier(p3(88,31,48),'Player_2_Deployed')]),if(p5(1,89,21,91,24),not_equal(p3(89,24,37),identifier(p3(89,24,31),fleet_1),empty_set(p3(89,35,37))),operation_call(p3(90,25,33),identifier(p3(90,25,33),setState),[],[identifier(p3(90,34,41),'Ongoing')]),[],skip(none))]),[],skip(none)),[],skip(none))))),operation(p5(1,98,5,143,8),identifier(p5(1,98,5,143,8),playerShoots),[identifier(p3(98,5,11),report)],[identifier(p3(98,29,35),target)],precondition(p5(1,99,5,143,8),conjunct(p5(1,100,9,103,40),[definition(p3(100,9,31),isValidPosition,[identifier(p3(100,25,31),target)]),equal(p3(101,9,37),identifier(p3(101,9,27),current_game_state),identifier(p3(101,30,37),'Ongoing')),definition(p3(102,9,37),isFleetDeployed,[identifier(p3(102,25,37),current_turn)]),not_member(p3(103,9,40),identifier(p3(103,9,15),target),function(p3(103,19,40),identifier(p3(103,19,26),attacks),[identifier(p3(103,27,39),current_turn)]))]),if(p5(1,105,9,142,12),definition(p3(105,12,33),isPlayerTurn,[identifier(p3(105,25,33),'Player_1')]),if(p5(1,106,13,120,16),member(p3(106,16,32),identifier(p3(106,16,22),target),identifier(p3(106,25,32),fleet_2)),parallel(p5(1,107,17,115,20),[assign(p3(107,17,46),[identifier(p3(107,17,24),fleet_2)],[minus_or_set_subtract(p3(107,28,46),identifier(p3(107,28,35),fleet_2),set_extension(p3(107,38,46),[identifier(p3(107,39,45),target)]))]),assign(p3(108,17,67),[function(p3(108,17,33),identifier(p3(108,17,24),attacks),[identifier(p3(108,25,33),'Player_1')])],[union(p3(108,38,67),function(p3(108,38,55),identifier(p3(108,38,45),attacks),[identifier(p3(108,46,54),'Player_1')]),set_extension(p3(108,59,67),[identifier(p3(108,60,66),target)]))]),if(p5(1,109,17,115,20),definition(p3(109,20,38),isGameOver,[identifier(p3(109,31,38),fleet_2)]),parallel(p5(1,110,21,111,42),[assign(p3(110,21,43),[identifier(p3(110,21,27),report)],[identifier(p3(110,31,43),'Player_1_Hit')]),operation_call(p3(111,21,29),identifier(p3(111,21,29),setState),[],[identifier(p3(111,30,42),'Won_Player_1')])]),[],parallel(p5(1,113,21,114,46),[assign(p3(113,21,43),[identifier(p3(113,21,27),report)],[identifier(p3(113,31,43),'Player_1_Hit')]),operation_call(p3(114,21,37),identifier(p3(114,21,37),setCurrentPlayer),[],[identifier(p3(114,38,46),'Player_2')])]))]),[],parallel(p5(1,117,17,119,42),[assign(p3(117,17,67),[function(p3(117,17,33),identifier(p3(117,17,24),attacks),[identifier(p3(117,25,33),'Player_1')])],[union(p3(117,38,67),function(p3(117,38,55),identifier(p3(117,38,45),attacks),[identifier(p3(117,46,54),'Player_1')]),set_extension(p3(117,59,67),[identifier(p3(117,60,66),target)]))]),assign(p3(118,17,40),[identifier(p3(118,17,23),report)],[identifier(p3(118,27,40),'Player_1_Miss')]),operation_call(p3(119,17,33),identifier(p3(119,17,33),setCurrentPlayer),[],[identifier(p3(119,34,42),'Player_2')])])),[],if(p5(1,122,14,141,16),definition(p3(122,17,38),isPlayerTurn,[identifier(p3(122,30,38),'Player_2')]),if(p5(1,124,17,138,20),member(p3(124,20,36),identifier(p3(124,20,26),target),identifier(p3(124,29,36),fleet_1)),parallel(p5(1,125,21,133,24),[assign(p3(125,21,50),[identifier(p3(125,21,28),fleet_1)],[minus_or_set_subtract(p3(125,32,50),identifier(p3(125,32,39),fleet_1),set_extension(p3(125,42,50),[identifier(p3(125,43,49),target)]))]),assign(p3(126,21,71),[function(p3(126,21,37),identifier(p3(126,21,28),attacks),[identifier(p3(126,29,37),'Player_2')])],[union(p3(126,42,71),function(p3(126,42,59),identifier(p3(126,42,49),attacks),[identifier(p3(126,50,58),'Player_2')]),set_extension(p3(126,63,71),[identifier(p3(126,64,70),target)]))]),if(p5(1,127,21,133,24),definition(p3(127,24,42),isGameOver,[identifier(p3(127,35,42),fleet_1)]),parallel(p5(1,128,25,129,46),[assign(p3(128,25,47),[identifier(p3(128,25,31),report)],[identifier(p3(128,35,47),'Player_2_Hit')]),operation_call(p3(129,25,33),identifier(p3(129,25,33),setState),[],[identifier(p3(129,34,46),'Won_Player_2')])]),[],parallel(p5(1,131,25,132,50),[assign(p3(131,25,47),[identifier(p3(131,25,31),report)],[identifier(p3(131,35,47),'Player_2_Hit')]),operation_call(p3(132,25,41),identifier(p3(132,25,41),setCurrentPlayer),[],[identifier(p3(132,42,50),'Player_1')])]))]),[],parallel(p5(1,135,21,137,46),[assign(p3(135,21,71),[function(p3(135,21,37),identifier(p3(135,21,28),attacks),[identifier(p3(135,29,37),'Player_2')])],[union(p3(135,42,71),function(p3(135,42,59),identifier(p3(135,42,49),attacks),[identifier(p3(135,50,58),'Player_2')]),set_extension(p3(135,63,71),[identifier(p3(135,64,70),target)]))]),assign(p3(136,21,44),[identifier(p3(136,21,27),report)],[identifier(p3(136,31,44),'Player_2_Miss')]),operation_call(p3(137,21,37),identifier(p3(137,21,37),setCurrentPlayer),[],[identifier(p3(137,38,46),'Player_1')])])),[],assign(p3(140,17,41),[identifier(p3(140,17,23),report)],[identifier(p3(140,27,41),'Error_Not_Turn')]))))),operation(p5(1,145,5,154,8),identifier(p5(1,145,5,154,8),shipLocations),[identifier(p3(145,5,16),shipsquares)],[identifier(p3(145,35,41),player)],precondition(p5(1,146,5,154,8),member(p3(147,9,24),identifier(p3(147,9,15),player),identifier(p3(147,18,24),'PLAYER')),if(p5(1,149,9,153,12),definition(p3(149,12,33),isPlayerTurn,[identifier(p3(149,25,33),'Player_1')]),assign(p3(150,13,35),[identifier(p3(150,13,24),shipsquares)],[identifier(p3(150,28,35),fleet_1)]),[],assign(p3(152,13,35),[identifier(p3(152,13,24),shipsquares)],[identifier(p3(152,28,35),fleet_2)])))),operation(p5(1,156,5,159,8),identifier(p5(1,156,5,159,8),shipsLeft),[identifier(p3(156,5,15),shipCounts)],[],block(p5(1,157,5,159,8),assign(p3(158,9,53),[identifier(p3(158,9,19),shipCounts)],[couple(p3(158,23,53),[card(p3(158,24,37),identifier(p3(158,29,36),fleet_1)),card(p3(158,39,52),identifier(p3(158,44,51),fleet_2))])]))),operation(p5(1,161,5,166,8),identifier(p5(1,161,5,166,8),shotsTaken),[identifier(p3(161,5,14),shotCount)],[identifier(p3(161,30,36),player)],precondition(p5(1,162,5,166,8),member(p3(163,9,24),identifier(p3(163,9,15),player),identifier(p3(163,18,24),'PLAYER')),assign(p3(165,9,43),[identifier(p3(165,9,18),shotCount)],[card(p3(165,22,43),function(p3(165,27,42),identifier(p3(165,27,34),attacks),[identifier(p3(165,35,41),player)]))]))),operation(p5(1,168,5,171,8),identifier(p5(1,168,5,171,8),gameStatus),[identifier(p3(168,5,11),report)],[],block(p5(1,169,5,171,8),assign(p3(170,9,37),[identifier(p3(170,9,15),report)],[identifier(p3(170,19,37),current_game_state)])))])])).
machine(abstract_machine(p5(2,7,1,43,4),machine(p4(2,7,1,8)),machine_header(p4(2,7,9,25),'GameStateMachine',[]),[sets(p5(2,8,1,10,73),[enumerated_set(p4(2,9,5,34),'PLAYER',[identifier(p4(2,9,15,23),'Player_1'),identifier(p4(2,9,25,33),'Player_2')]),enumerated_set(p4(2,10,5,73),'GAME_STATE',[identifier(p4(2,10,19,35),'Deploying_Fleets'),identifier(p4(2,10,37,44),'Ongoing'),identifier(p4(2,10,46,58),'Won_Player_1'),identifier(p4(2,10,60,72),'Won_Player_2')])]),variables(p5(2,11,1,12,37),[identifier(p4(2,12,5,23),current_game_state),identifier(p4(2,12,25,37),current_turn)]),invariant(p5(2,13,1,15,26),conjunct(p5(2,14,5,15,26),[member(p4(2,14,5,36),identifier(p4(2,14,5,23),current_game_state),identifier(p4(2,14,26,36),'GAME_STATE')),member(p4(2,15,5,26),identifier(p4(2,15,5,17),current_turn),identifier(p4(2,15,20,26),'PLAYER'))])),initialisation(p5(2,16,1,18,29),parallel(p5(2,17,5,18,29),[assign(p4(2,17,5,43),[identifier(p4(2,17,5,23),current_game_state)],[identifier(p4(2,17,27,43),'Deploying_Fleets')]),assign(p4(2,18,5,29),[identifier(p4(2,18,5,17),current_turn)],[identifier(p4(2,18,21,29),'Player_1')])])),operations(p5(2,19,1,42,8),[operation(p5(2,20,5,25,8),identifier(p5(2,20,5,25,8),setState),[],[identifier(p4(2,20,14,19),state)],precondition(p5(2,21,5,25,8),member(p4(2,22,9,27),identifier(p4(2,22,9,14),state),identifier(p4(2,22,17,27),'GAME_STATE')),assign(p4(2,24,9,36),[identifier(p4(2,24,9,27),current_game_state)],[identifier(p4(2,24,31,36),state)]))),operation(p5(2,27,5,30,8),identifier(p5(2,27,5,30,8),getState),[identifier(p4(2,27,5,11),result)],[],block(p5(2,28,5,30,8),assign(p4(2,29,9,37),[identifier(p4(2,29,9,15),result)],[identifier(p4(2,29,19,37),current_game_state)]))),operation(p5(2,32,5,37,8),identifier(p5(2,32,5,37,8),setCurrentPlayer),[],[identifier(p4(2,32,22,28),player)],precondition(p5(2,33,5,37,8),member(p4(2,34,9,24),identifier(p4(2,34,9,15),player),identifier(p4(2,34,18,24),'PLAYER')),assign(p4(2,36,9,31),[identifier(p4(2,36,9,21),current_turn)],[identifier(p4(2,36,25,31),player)]))),operation(p5(2,39,5,42,8),identifier(p5(2,39,5,42,8),getCurrentPlayer),[identifier(p4(2,39,5,11),result)],[],block(p5(2,40,5,42,8),assign(p4(2,41,9,31),[identifier(p4(2,41,9,15),result)],[identifier(p4(2,41,19,31),current_turn)])))])])).
